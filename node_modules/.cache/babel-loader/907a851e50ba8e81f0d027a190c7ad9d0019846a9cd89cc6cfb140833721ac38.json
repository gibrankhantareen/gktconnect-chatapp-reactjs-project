{"ast":null,"code":"import _objectSpread from\"D:/01ReactProjects/gktconnect-react-chat/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"D:/01ReactProjects/gktconnect-react-chat/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from\"react\";import Message from\"./Message\";import SendMessage from\"./SendMessage\";import{useEffect,useRef,useState}from\"react\";import{query,collection,orderBy,onSnapshot,limit}from\"firebase/firestore\";import{db}from\"../firebase\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ChatBox=function ChatBox(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),messages=_useState2[0],setMessages=_useState2[1];useEffect(function(){var q=query(collection(db,\"messages\"),orderBy(\"createdAt\"),limit(50));var unsubscribe=onSnapshot(q,function(QuerySnapshot){var messages=[];QuerySnapshot.forEach(function(doc){messages.push(_objectSpread(_objectSpread({},doc.data()),{},{id:doc.id}));});setMessages(messages);});return function(){return unsubscribe;};},[]);return/*#__PURE__*/_jsxs(\"main\",{className:\"chat-box\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"messages-wrapper\",children:messages===null||messages===void 0?void 0:messages.map(function(message){return/*#__PURE__*/_jsx(Message,{message:message},message.id);})}),/*#__PURE__*/_jsx(SendMessage,{})]});};export default ChatBox;","map":{"version":3,"names":["React","Message","SendMessage","useEffect","useRef","useState","query","collection","orderBy","onSnapshot","limit","db","jsx","_jsx","jsxs","_jsxs","ChatBox","_useState","_useState2","_slicedToArray","messages","setMessages","q","unsubscribe","QuerySnapshot","forEach","doc","push","_objectSpread","data","id","className","children","map","message"],"sources":["D:/01ReactProjects/gktconnect-react-chat/src/components/ChatBox.js"],"sourcesContent":["import React from \"react\";\nimport Message from \"./Message\";\nimport SendMessage from \"./SendMessage\";\nimport { useEffect, useRef, useState } from \"react\";\nimport {\n  query,\n  collection,\n  orderBy,\n  onSnapshot,\n  limit,\n} from \"firebase/firestore\";\nimport { db } from \"../firebase\";\n\nconst ChatBox = () => {\n  const [messages, setMessages] = useState([]);\n  \n  useEffect(() => {\n    const q = query(\n      collection(db, \"messages\"),\n      orderBy(\"createdAt\"),\n      limit(50)\n    );\n    const unsubscribe = onSnapshot(q, (QuerySnapshot) => {\n      let messages = [];\n      QuerySnapshot.forEach((doc) => {\n        messages.push({ ...doc.data(), id: doc.id });\n      });\n      setMessages(messages);\n    });\n    return () => unsubscribe;\n  }, []);\n\n  return (\n    <main className=\"chat-box\">\n      <div className=\"messages-wrapper\">\n        {messages?.map((message) => (\n          <Message key={message.id} message={message} />\n        ))}\n      </div>\n      <SendMessage />\n    </main>\n  );\n};\nexport default ChatBox;\n"],"mappings":"2PAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CACzB,MAAO,CAAAC,OAAO,KAAM,WAAW,CAC/B,MAAO,CAAAC,WAAW,KAAM,eAAe,CACvC,OAASC,SAAS,CAAEC,MAAM,CAAEC,QAAQ,KAAQ,OAAO,CACnD,OACEC,KAAK,CACLC,UAAU,CACVC,OAAO,CACPC,UAAU,CACVC,KAAK,KACA,oBAAoB,CAC3B,OAASC,EAAE,KAAQ,aAAa,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAEjC,GAAM,CAAAC,OAAO,CAAG,QAAV,CAAAA,OAAOA,CAAA,CAAS,CACpB,IAAAC,SAAA,CAAgCZ,QAAQ,CAAC,EAAE,CAAC,CAAAa,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAArCG,QAAQ,CAAAF,UAAA,IAAEG,WAAW,CAAAH,UAAA,IAE5Bf,SAAS,CAAC,UAAM,CACd,GAAM,CAAAmB,CAAC,CAAGhB,KAAK,CACbC,UAAU,CAACI,EAAE,CAAE,UAAU,CAAC,CAC1BH,OAAO,CAAC,WAAW,CAAC,CACpBE,KAAK,CAAC,EAAE,CAAC,CACV,CACD,GAAM,CAAAa,WAAW,CAAGd,UAAU,CAACa,CAAC,CAAE,SAACE,aAAa,CAAK,CACnD,GAAI,CAAAJ,QAAQ,CAAG,EAAE,CACjBI,aAAa,CAACC,OAAO,CAAC,SAACC,GAAG,CAAK,CAC7BN,QAAQ,CAACO,IAAI,CAAAC,aAAA,CAAAA,aAAA,IAAMF,GAAG,CAACG,IAAI,EAAE,MAAEC,EAAE,CAAEJ,GAAG,CAACI,EAAE,GAAG,CAC9C,CAAC,CAAC,CACFT,WAAW,CAACD,QAAQ,CAAC,CACvB,CAAC,CAAC,CACF,MAAO,kBAAM,CAAAG,WAAW,GAC1B,CAAC,CAAE,EAAE,CAAC,CAEN,mBACER,KAAA,SAAMgB,SAAS,CAAC,UAAU,CAAAC,QAAA,eACxBnB,IAAA,QAAKkB,SAAS,CAAC,kBAAkB,CAAAC,QAAA,CAC9BZ,QAAQ,SAARA,QAAQ,iBAARA,QAAQ,CAAEa,GAAG,CAAC,SAACC,OAAO,qBACrBrB,IAAA,CAACZ,OAAO,EAAkBiC,OAAO,CAAEA,OAAQ,EAA7BA,OAAO,CAACJ,EAAE,CAAsB,EAC/C,CAAC,EACE,cACNjB,IAAA,CAACX,WAAW,IAAG,GACV,CAEX,CAAC,CACD,cAAe,CAAAc,OAAO"},"metadata":{},"sourceType":"module","externalDependencies":[]}